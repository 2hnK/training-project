# í˜„ëŒ€ì ì¸ í’€ìŠ¤íƒ ì• í”Œë¦¬ì¼€ì´ì…˜ ê°œë°œ ê°€ì´ë“œ

## ğŸ¯ í•™ìŠµ ëª©í‘œ
ì´ í”„ë¡œì íŠ¸ëŠ” ì‹¤ë¬´ì—ì„œ ì‚¬ìš©í•˜ëŠ” í‘œì¤€ì ì´ê³  í˜„ëŒ€ì ì¸ ê°œë°œ ë°©ë²•ë¡ ì„ í•™ìŠµí•˜ê¸° ìœ„í•œ ê²ƒì…ë‹ˆë‹¤.
ì½”ë“œë¥¼ ì‘ì„±í•  ë•Œ "ì™œ ì´ë ‡ê²Œ í•˜ëŠ”ê°€"ë¥¼ í•­ìƒ ìƒê°í•˜ë©°, ì‹¤ë¬´ ë² ìŠ¤íŠ¸ í”„ë™í‹°ìŠ¤ë¥¼ ì²´ë“í•˜ëŠ” ê²ƒì´ ëª©í‘œì…ë‹ˆë‹¤.

---

## ğŸ“‹ ì „ì²´ ì›ì¹™

### ì½”ë“œ ì‘ì„± ì² í•™
- **ê°€ë…ì„± ìš°ì„ **: ë˜‘ë˜‘í•œ ì½”ë“œë³´ë‹¤ ì½ê¸° ì‰¬ìš´ ì½”ë“œë¥¼ ì‘ì„±
- **ë‹¨ìˆœí•¨ ì¶”êµ¬**: ë³µì¡í•œ í•´ê²°ì±…ë³´ë‹¤ ë‹¨ìˆœí•œ í•´ê²°ì±…ì„ ì„ í˜¸
- **ì¼ê´€ì„± ìœ ì§€**: í”„ë¡œì íŠ¸ ì „ì²´ì—ì„œ ë™ì¼í•œ íŒ¨í„´ê³¼ ìŠ¤íƒ€ì¼ ì‚¬ìš©
- **ì˜ë¯¸ ìˆëŠ” ì´ë¦„**: ë³€ìˆ˜, í•¨ìˆ˜, í´ë˜ìŠ¤ ì´ë¦„ë§Œìœ¼ë¡œ ì˜ë„ê°€ ì „ë‹¬ë˜ë„ë¡
- **ì‘ì€ ë‹¨ìœ„**: í•¨ìˆ˜ì™€ í´ë˜ìŠ¤ëŠ” í•˜ë‚˜ì˜ ì±…ì„ë§Œ ê°€ì§€ë„ë¡ ì‘ê²Œ ìœ ì§€

### AI ì½”ë”© ë„êµ¬ì™€ì˜ í˜‘ì—…
- AIê°€ ìƒì„±í•œ ì½”ë“œëŠ” ë°˜ë“œì‹œ ì´í•´í•˜ê³  ê²€í† í•œ í›„ ì‚¬ìš©
- ìƒì„±ëœ ì½”ë“œê°€ í”„ë¡œì íŠ¸ì˜ íŒ¨í„´ê³¼ ì¼ê´€ì„± ìˆëŠ”ì§€ í™•ì¸
- ë³µì¡í•œ ë¡œì§ì€ ìƒì„± í›„ ë¦¬íŒ©í† ë§í•˜ì—¬ ê°€ë…ì„± ê°œì„ 
- AIì˜ ì œì•ˆì„ ë§¹ëª©ì ìœ¼ë¡œ ë”°ë¥´ì§€ ë§ê³ , ì‹¤ë¬´ ê¸°ì¤€ìœ¼ë¡œ íŒë‹¨

---

## ğŸ¨ í”„ë¡ íŠ¸ì—”ë“œ: Next.js + React + TypeScript

### í”„ë¡œì íŠ¸ ê¸°ë³¸ ì„¤ì •
```
- Next.js 15 (App Router)
- React 19
- TypeScript (Strict ëª¨ë“œ)
- Tailwind CSS + Radix UI
- React Hook Form (í¼ ê´€ë¦¬)
```

### TypeScript ì‘ì„± ê·œì¹™

#### íƒ€ì… ì •ì˜
```typescript
// âœ… ì¢‹ì€ ì˜ˆ: ëª…í™•í•œ íƒ€ì… ì •ì˜
interface User {
  id: string
  email: string
  name: string
  createdAt: Date
}

interface UserListProps {
  users: User[]
  onUserClick: (userId: string) => void
}

// âŒ ë‚˜ìœ ì˜ˆ: any ì‚¬ìš©
function handleData(data: any) { }

// âœ… ì¢‹ì€ ì˜ˆ: ì œë„¤ë¦­ í™œìš©
function handleData<T>(data: T): T { }
```

#### ì‹¤ë¬´ íƒ€ì… íŒ¨í„´
- `any` ì ˆëŒ€ ì‚¬ìš© ê¸ˆì§€ - íƒ€ì…ì„ ëª¨ë¥´ë©´ `unknown` ì‚¬ìš©
- ì»´í¬ë„ŒíŠ¸ propsëŠ” í•­ìƒ interfaceë¡œ ì •ì˜
- API ì‘ë‹µ íƒ€ì…ì€ ë³„ë„ íŒŒì¼ë¡œ ê´€ë¦¬ (`types/` ë””ë ‰í† ë¦¬)
- union íƒ€ì…ê³¼ íƒ€ì… ê°€ë“œ ì ê·¹ í™œìš©

### React ì»´í¬ë„ŒíŠ¸ ì‘ì„±

#### ê¸°ë³¸ êµ¬ì¡°
```typescript
// âœ… ì‹¤ë¬´ í‘œì¤€ ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°
'use client' // í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸ì¸ ê²½ìš°ì—ë§Œ

import { useState } from 'react'
import { Button } from '@/components/ui/primitives/button'

interface PostCardProps {
  title: string
  content: string
  authorName: string
  onLike: () => void
}

export function PostCard({ title, content, authorName, onLike }: PostCardProps) {
  const [isLiked, setIsLiked] = useState(false)

  const handleLike = () => {
    setIsLiked(true)
    onLike()
  }

  return (
    <article className="rounded-lg border p-4">
      <h2 className="text-xl font-bold">{title}</h2>
      <p className="mt-2 text-gray-600">{content}</p>
      <footer className="mt-4 flex items-center justify-between">
        <span className="text-sm text-gray-500">{authorName}</span>
        <Button onClick={handleLike} variant={isLiked ? 'default' : 'outline'}>
          {isLiked ? 'ì¢‹ì•„ìš” ì™„ë£Œ' : 'ì¢‹ì•„ìš”'}
        </Button>
      </footer>
    </article>
  )
}
```

#### ì»´í¬ë„ŒíŠ¸ ì„¤ê³„ ì›ì¹™
- **Server Component ìš°ì„ **: ê¸°ë³¸ì ìœ¼ë¡œ ì„œë²„ ì»´í¬ë„ŒíŠ¸ë¡œ ì‘ì„±í•˜ê³ , ìƒí˜¸ì‘ìš©ì´ í•„ìš”í•  ë•Œë§Œ `'use client'` ì¶”ê°€
- **PropsëŠ” ë‹¨ìˆœí•˜ê²Œ**: 3-5ê°œë¥¼ ë„˜ì§€ ì•Šë„ë¡. ë§ì•„ì§€ë©´ ê°ì²´ë¡œ ê·¸ë£¹í™”
- **í•œ íŒŒì¼ í•œ ì»´í¬ï¿½íŠ¸**: ì¬ì‚¬ìš©ë˜ëŠ” ì»´í¬ë„ŒíŠ¸ë§Œ ë³„ë„ íŒŒì¼ë¡œ ë¶„ë¦¬
- **200ì¤„ ì œí•œ**: ì»´í¬ë„ŒíŠ¸ê°€ 200ì¤„ì„ ë„˜ìœ¼ë©´ ë¶„ë¦¬ ê³ ë ¤

### Hooks ì‚¬ìš©ë²•

#### Custom Hook ì‘ì„±
```typescript
// âœ… ì‹¤ë¬´ í‘œì¤€ Custom Hook
// hooks/useAuth.ts
import { useState, useEffect } from 'react'

interface User {
  id: string
  email: string
  name: string
}

export function useAuth() {
  const [user, setUser] = useState<User | null>(null)
  const [isLoading, setIsLoading] = useState(true)
  const [error, setError] = useState<Error | null>(null)

  useEffect(() => {
    fetchCurrentUser()
      .then(setUser)
      .catch(setError)
      .finally(() => setIsLoading(false))
  }, [])

  return { user, isLoading, error }
}
```

#### Hook ì‚¬ìš© ì›ì¹™
- ë¡œì§ ì¬ì‚¬ìš©ì´ í•„ìš”í•  ë•Œ Custom Hookìœ¼ë¡œ ì¶”ì¶œ
- `use`ë¡œ ì‹œì‘í•˜ëŠ” ëª…í™•í•œ ì´ë¦„ ì‚¬ìš©
- ì˜ì¡´ì„± ë°°ì—´ ì •í™•íˆ ì‘ì„± (ESLint ê²½ê³  ë¬´ì‹œ ê¸ˆì§€)
- ì„±ëŠ¥ ìµœì í™”ëŠ” ì¸¡ì • í›„ ì ìš© (useMemo, useCallback ë‚¨ìš© ê¸ˆì§€)

### Next.js App Router

#### ë””ë ‰í† ë¦¬ êµ¬ì¡°
```
app/
â”œâ”€â”€ layout.tsx          # ë£¨íŠ¸ ë ˆì´ì•„ì›ƒ
â”œâ”€â”€ page.tsx           # í™ˆí˜ì´ì§€
â”œâ”€â”€ loading.tsx        # ë¡œë”© UI
â”œâ”€â”€ error.tsx          # ì—ëŸ¬ UI
â”œâ”€â”€ posts/
â”‚   â”œâ”€â”€ page.tsx       # ê²Œì‹œê¸€ ëª©ë¡
â”‚   â”œâ”€â”€ loading.tsx    # ê²Œì‹œê¸€ ëª©ë¡ ë¡œë”©
â”‚   â”œâ”€â”€ [id]/
â”‚   â”‚   â”œâ”€â”€ page.tsx   # ê²Œì‹œê¸€ ìƒì„¸
â”‚   â”‚   â””â”€â”€ loading.tsx
â”‚   â””â”€â”€ new/
â”‚       â””â”€â”€ page.tsx   # ê²Œì‹œê¸€ ì‘ì„±
â””â”€â”€ api/
    â””â”€â”€ posts/
        â””â”€â”€ route.ts   # API ë¼ìš°íŠ¸
```

#### í˜ì´ì§€ ì‘ì„± ì›ì¹™
```typescript
// âœ… ì‹¤ë¬´ í‘œì¤€ í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸
// app/posts/[id]/page.tsx

import { notFound } from 'next/navigation'
import { PostDetail } from '@/components/forum/PostDetail'

interface PageProps {
  params: Promise<{ id: string }>
  searchParams: Promise<{ [key: string]: string | string[] | undefined }>
}

export async function generateMetadata({ params }: PageProps) {
  const { id } = await params
  const post = await fetchPost(id)

  if (!post) return { title: 'ê²Œì‹œê¸€ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤' }

  return {
    title: post.title,
    description: post.content.slice(0, 160),
  }
}

export default async function PostPage({ params }: PageProps) {
  const { id } = await params
  const post = await fetchPost(id)

  if (!post) {
    notFound()
  }

  return <PostDetail post={post} />
}

async function fetchPost(id: string) {
  const res = await fetch(`http://localhost:8080/api/v1/posts/${id}`, {
    next: { revalidate: 60 } // 60ì´ˆ ìºì‹œ
  })

  if (!res.ok) return null
  return res.json()
}
```

#### Next.js í•µì‹¬ ê°œë…
- **Server Component**: ê¸°ë³¸ê°’. DB ì¡°íšŒ, API í˜¸ì¶œ ê°€ëŠ¥. SEO ìµœì í™”
- **Client Component**: `'use client'` ì¶”ê°€. useState, useEffect ë“± ì‚¬ìš© ê°€ëŠ¥
- **Server Actions**: í¼ ì œì¶œ, ë°ì´í„° ë³€ê²½ ì‹œ ì‚¬ìš©
- **ìºì‹± ì „ëµ**: `next: { revalidate }` ë¡œ ìºì‹œ ì‹œê°„ ì§€ì •

### ìŠ¤íƒ€ì¼ë§

#### Tailwind CSS ì‚¬ìš©ë²•
```typescript
// âœ… ì‹¤ë¬´ í‘œì¤€ ìŠ¤íƒ€ì¼ë§
export function Card({ children }: { children: React.ReactNode }) {
  return (
    <div className="rounded-lg border border-gray-200 bg-white p-6 shadow-sm hover:shadow-md transition-shadow">
      {children}
    </div>
  )
}

// ë°˜ì‘í˜• ë””ìì¸
export function ResponsiveGrid() {
  return (
    <div className="grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3">
      {/* ëª¨ë°”ì¼: 1ì—´, íƒœë¸”ë¦¿: 2ì—´, ë°ìŠ¤í¬í†±: 3ì—´ */}
    </div>
  )
}

// ë‹¤í¬ëª¨ë“œ ì§€ì›
export function ThemedButton() {
  return (
    <button className="bg-white dark:bg-gray-800 text-gray-900 dark:text-white">
      í…Œë§ˆ ì ìš© ë²„íŠ¼
    </button>
  )
}
```

#### ìŠ¤íƒ€ì¼ë§ ì›ì¹™
- Tailwind ìœ í‹¸ë¦¬í‹° í´ë˜ìŠ¤ ìš°ì„  ì‚¬ìš©
- ë³µì¡í•œ ìŠ¤íƒ€ì¼ì€ ì»´í¬ë„ŒíŠ¸ë¡œ ì¶”ìƒí™”
- ì¼ê´€ëœ ê°„ê²© ì‚¬ìš©: 4px ê¸°ì¤€ (p-1, p-2, p-4, p-6 ë“±)
- ë°˜ì‘í˜•ì€ ëª¨ë°”ì¼ ìš°ì„  (sm:, md:, lg:)

### ìƒíƒœ ê´€ë¦¬

#### ìƒíƒœ ê´€ë¦¬ ì „ëµ
```typescript
// 1. ë¡œì»¬ ìƒíƒœ: useState
function Counter() {
  const [count, setCount] = useState(0)
  return <button onClick={() => setCount(count + 1)}>{count}</button>
}

// 2. ë³µì¡í•œ ë¡œì»¬ ìƒíƒœ: useReducer
function TodoList() {
  const [state, dispatch] = useReducer(todoReducer, initialState)
  return (
    <button onClick={() => dispatch({ type: 'ADD_TODO', payload: todo })}>
      ì¶”ê°€
    </button>
  )
}

// 3. ì „ì—­ ìƒíƒœ: Context API
const AuthContext = createContext<AuthContextType | null>(null)

export function AuthProvider({ children }: { children: React.ReactNode }) {
  const [user, setUser] = useState<User | null>(null)

  return (
    <AuthContext.Provider value={{ user, setUser }}>
      {children}
    </AuthContext.Provider>
  )
}

export function useAuthContext() {
  const context = useContext(AuthContext)
  if (!context) throw new Error('AuthProvider ë‚´ì—ì„œ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤')
  return context
}
```

#### ìƒíƒœ ê´€ë¦¬ ì›ì¹™
- ìƒíƒœëŠ” ê°€ëŠ¥í•œ í•œ ì‚¬ìš©í•˜ëŠ” ê³³ ê°€ê¹Œì´ì— ìœ„ì¹˜
- ì„œë²„ ë°ì´í„°ëŠ” React Queryë‚˜ SWR ì‚¬ìš© ê³ ë ¤
- ì „ì—­ ìƒíƒœëŠ” ìµœì†Œí™” (ì •ë§ í•„ìš”í•  ë•Œë§Œ)
- Props drillingì´ 3ë‹¨ê³„ ì´ìƒì´ë©´ Context ê³ ë ¤

### í¼ ì²˜ë¦¬

#### React Hook Form + Server Actions
```typescript
// âœ… ì‹¤ë¬´ í‘œì¤€ í¼ ì²˜ë¦¬
'use client'

import { useForm } from 'react-hook-form'
import { createPost } from './actions'

interface PostFormData {
  title: string
  content: string
  categoryId: string
}

export function PostCreateForm() {
  const {
    register,
    handleSubmit,
    formState: { errors, isSubmitting },
  } = useForm<PostFormData>()

  const onSubmit = async (data: PostFormData) => {
    try {
      await createPost(data)
      // ì„±ê³µ ì²˜ë¦¬
    } catch (error) {
      // ì—ëŸ¬ ì²˜ë¦¬
    }
  }

  return (
    <form onSubmit={handleSubmit(onSubmit)} className="space-y-4">
      <div>
        <label htmlFor="title" className="block text-sm font-medium">
          ì œëª©
        </label>
        <input
          id="title"
          {...register('title', {
            required: 'ì œëª©ì€ í•„ìˆ˜ì…ë‹ˆë‹¤',
            minLength: { value: 2, message: 'ìµœì†Œ 2ê¸€ì ì´ìƒ' }
          })}
          className="mt-1 block w-full rounded-md border p-2"
        />
        {errors.title && (
          <p className="mt-1 text-sm text-red-600">{errors.title.message}</p>
        )}
      </div>

      <button
        type="submit"
        disabled={isSubmitting}
        className="w-full rounded-md bg-blue-600 px-4 py-2 text-white"
      >
        {isSubmitting ? 'ì €ì¥ ì¤‘...' : 'ì €ì¥'}
      </button>
    </form>
  )
}
```

### ì—ëŸ¬ ì²˜ë¦¬ & ë¡œë”© ìƒíƒœ

#### ì‹¤ë¬´ í‘œì¤€ íŒ¨í„´
```typescript
// loading.tsx
export default function Loading() {
  return (
    <div className="flex items-center justify-center p-8">
      <div className="h-8 w-8 animate-spin rounded-full border-4 border-gray-200 border-t-blue-600" />
    </div>
  )
}

// error.tsx
'use client'

export default function Error({
  error,
  reset,
}: {
  error: Error & { digest?: string }
  reset: () => void
}) {
  return (
    <div className="flex flex-col items-center justify-center p-8">
      <h2 className="text-xl font-bold">ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤</h2>
      <p className="mt-2 text-gray-600">{error.message}</p>
      <button
        onClick={reset}
        className="mt-4 rounded-md bg-blue-600 px-4 py-2 text-white"
      >
        ë‹¤ì‹œ ì‹œë„
      </button>
    </div>
  )
}
```

---

## ğŸš€ ë°±ì—”ë“œ: Spring Boot + Java

### í”„ë¡œì íŠ¸ ê¸°ë³¸ ì„¤ì •
```
- Spring Boot 3.5
- Java 21
- Spring Data JPA + QueryDSL
- Spring Security
- H2 Database
- Gradle
```

### í”„ë¡œì íŠ¸ êµ¬ì¡°

#### í‘œì¤€ íŒ¨í‚¤ì§€ êµ¬ì¡°
```
com.sample.springtraining/
â”œâ”€â”€ config/              # ì„¤ì • í´ë˜ìŠ¤
â”‚   â”œâ”€â”€ SecurityConfig
â”‚   â””â”€â”€ WebConfig
â”œâ”€â”€ controller/          # REST API ì»¨íŠ¸ë¡¤ëŸ¬
â”‚   â”œâ”€â”€ PostController
â”‚   â””â”€â”€ UserController
â”œâ”€â”€ service/            # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”‚   â”œâ”€â”€ PostService
â”‚   â””â”€â”€ UserService
â”œâ”€â”€ repository/         # ë°ì´í„° ì ‘ê·¼
â”‚   â”œâ”€â”€ PostRepository
â”‚   â””â”€â”€ UserRepository
â”œâ”€â”€ entity/             # JPA ì—”í‹°í‹°
â”‚   â”œâ”€â”€ Post
â”‚   â””â”€â”€ User
â”œâ”€â”€ dto/                # ë°ì´í„° ì „ì†¡ ê°ì²´
â”‚   â”œâ”€â”€ request/
â”‚   â”‚   â”œâ”€â”€ PostCreateRequest
â”‚   â”‚   â””â”€â”€ PostUpdateRequest
â”‚   â””â”€â”€ response/
â”‚       â””â”€â”€ PostResponse
â”œâ”€â”€ exception/          # ì˜ˆì™¸ í´ë˜ìŠ¤
â”‚   â”œâ”€â”€ GlobalExceptionHandler
â”‚   â””â”€â”€ ResourceNotFoundException
â””â”€â”€ security/           # ë³´ì•ˆ ê´€ë ¨
    â””â”€â”€ JwtTokenProvider
```

### Controller ì‘ì„±

#### ì‹¤ë¬´ í‘œì¤€ REST Controller
```java
package com.sample.springtraining.controller;

import com.sample.springtraining.dto.request.PostCreateRequest;
import com.sample.springtraining.dto.response.PostResponse;
import com.sample.springtraining.service.PostService;
import jakarta.validation.Valid;
import lombok.RequiredArgsConstructor;
import org.springframework.data.domain.Page;
import org.springframework.data.domain.Pageable;
import org.springframework.data.web.PageableDefault;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.*;

import java.net.URI;

/**
 * ê²Œì‹œê¸€ ê´€ë ¨ REST API
 *
 * ê¸°ë³¸ ê²½ë¡œ: /api/v1/posts
 */
@RestController
@RequestMapping("/api/v1/posts")
@RequiredArgsConstructor // final í•„ë“œ ìƒì„±ì ìë™ ìƒì„±
public class PostController {

    private final PostService postService;

    /**
     * ê²Œì‹œê¸€ ëª©ë¡ ì¡°íšŒ (í˜ì´ì§•)
     *
     * GET /api/v1/posts?page=0&size=20&sort=createdAt,desc
     */
    @GetMapping
    public ResponseEntity<Page<PostResponse>> getPosts(
            @PageableDefault(size = 20, sort = "createdAt") Pageable pageable
    ) {
        Page<PostResponse> posts = postService.getPosts(pageable);
        return ResponseEntity.ok(posts);
    }

    /**
     * ê²Œì‹œê¸€ ìƒì„¸ ì¡°íšŒ
     *
     * GET /api/v1/posts/{id}
     */
    @GetMapping("/{id}")
    public ResponseEntity<PostResponse> getPost(@PathVariable Long id) {
        PostResponse post = postService.getPost(id);
        return ResponseEntity.ok(post);
    }

    /**
     * ê²Œì‹œê¸€ ìƒì„±
     *
     * POST /api/v1/posts
     */
    @PostMapping
    public ResponseEntity<PostResponse> createPost(
            @Valid @RequestBody PostCreateRequest request
    ) {
        PostResponse created = postService.createPost(request);
        return ResponseEntity
                .created(URI.create("/api/v1/posts/" + created.id()))
                .body(created);
    }

    /**
     * ê²Œì‹œê¸€ ì‚­ì œ
     *
     * DELETE /api/v1/posts/{id}
     */
    @DeleteMapping("/{id}")
    public ResponseEntity<Void> deletePost(@PathVariable Long id) {
        postService.deletePost(id);
        return ResponseEntity.noContent().build();
    }
}
```

#### Controller ì‘ì„± ì›ì¹™
- **ì–‡ê²Œ ìœ ì§€**: ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì€ Serviceì—, ControllerëŠ” ìš”ì²­/ì‘ë‹µ ì²˜ë¦¬ë§Œ
- **ëª…í™•í•œ HTTP ë©”ì„œë“œ**: GET(ì¡°íšŒ), POST(ìƒì„±), PUT(ì „ì²´ ìˆ˜ì •), PATCH(ë¶€ë¶„ ìˆ˜ì •), DELETE(ì‚­ì œ)
- **ì ì ˆí•œ ìƒíƒœ ì½”ë“œ**: 200(OK), 201(Created), 204(No Content), 400(Bad Request), 404(Not Found)
- **@Valid ì‚¬ìš©**: ìš”ì²­ ë°ì´í„° ê²€ì¦ ìë™í™”
- **ìƒì„±ì ì£¼ì…**: @RequiredArgsConstructorë¡œ final í•„ë“œ ì£¼ì…

### Service ì‘ì„±

#### ì‹¤ë¬´ í‘œì¤€ Service Layer
```java
package com.sample.springtraining.service;

import com.sample.springtraining.dto.request.PostCreateRequest;
import com.sample.springtraining.dto.response.PostResponse;
import com.sample.springtraining.entity.Post;
import com.sample.springtraining.entity.Member;
import com.sample.springtraining.exception.ResourceNotFoundException;
import com.sample.springtraining.repository.PostRepository;
import com.sample.springtraining.repository.MemberRepository;
import lombok.RequiredArgsConstructor;
import lombok.extern.slf4j.Slf4j;
import org.springframework.data.domain.Page;
import org.springframework.data.domain.Pageable;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;

/**
 * ê²Œì‹œê¸€ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
 */
@Slf4j
@Service
@RequiredArgsConstructor
@Transactional(readOnly = true) // ê¸°ë³¸ì€ ì½ê¸° ì „ìš©
public class PostService {

    private final PostRepository postRepository;
    private final MemberRepository memberRepository;

    /**
     * ê²Œì‹œê¸€ ëª©ë¡ ì¡°íšŒ
     */
    public Page<PostResponse> getPosts(Pageable pageable) {
        log.info("ê²Œì‹œê¸€ ëª©ë¡ ì¡°íšŒ - í˜ì´ì§€: {}, í¬ê¸°: {}",
                pageable.getPageNumber(), pageable.getPageSize());

        return postRepository.findAll(pageable)
                .map(PostResponse::from);
    }

    /**
     * ê²Œì‹œê¸€ ìƒì„¸ ì¡°íšŒ
     */
    public PostResponse getPost(Long id) {
        Post post = postRepository.findById(id)
                .orElseThrow(() -> new ResourceNotFoundException("ê²Œì‹œê¸€ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: " + id));

        return PostResponse.from(post);
    }

    /**
     * ê²Œì‹œê¸€ ìƒì„±
     */
    @Transactional // ì“°ê¸° ì‘ì—…ì€ readOnly = false
    public PostResponse createPost(PostCreateRequest request) {
        log.info("ê²Œì‹œê¸€ ìƒì„± - ì œëª©: {}", request.title());

        // ì‘ì„±ì ì¡°íšŒ
        Member author = memberRepository.findById(request.authorId())
                .orElseThrow(() -> new ResourceNotFoundException("ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤"));

        // ì—”í‹°í‹° ìƒì„± ë° ì €ì¥
        Post post = Post.builder()
                .title(request.title())
                .content(request.content())
                .author(author)
                .build();

        Post saved = postRepository.save(post);

        log.info("ê²Œì‹œê¸€ ìƒì„± ì™„ë£Œ - ID: {}", saved.getId());
        return PostResponse.from(saved);
    }

    /**
     * ê²Œì‹œê¸€ ì‚­ì œ
     */
    @Transactional
    public void deletePost(Long id) {
        log.info("ê²Œì‹œê¸€ ì‚­ì œ - ID: {}", id);

        if (!postRepository.existsById(id)) {
            throw new ResourceNotFoundException("ê²Œì‹œê¸€ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: " + id);
        }

        postRepository.deleteById(id);
        log.info("ê²Œì‹œê¸€ ì‚­ì œ ì™„ë£Œ - ID: {}", id);
    }
}
```

#### Service ì‘ì„± ì›ì¹™
- **íŠ¸ëœì­ì…˜ ê´€ë¦¬**: í´ë˜ìŠ¤ ë ˆë²¨ì— `@Transactional(readOnly = true)`, ì“°ê¸° ë©”ì„œë“œì—ë§Œ `@Transactional`
- **ë‹¨ì¼ ì±…ì„**: í•˜ë‚˜ì˜ ServiceëŠ” í•˜ë‚˜ì˜ ë„ë©”ì¸ë§Œ ë‹´ë‹¹
- **ëª…í™•í•œ ë©”ì„œë“œëª…**: ë™ì‚¬ë¡œ ì‹œì‘í•˜ê³  ì˜ë„ê°€ ëª…í™•í•˜ê²Œ
- **ë¡œê¹…**: ì£¼ìš” ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì‹¤í–‰ ì‹œì‘/ì™„ë£Œ ë¡œê·¸ ë‚¨ê¸°ê¸°
- **ì˜ˆì™¸ ì²˜ë¦¬**: ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™ ìœ„ë°˜ì€ ëª…í™•í•œ ì˜ˆì™¸ë¡œ í‘œí˜„

### DTO ì‘ì„±

#### Record í™œìš©í•œ DTO
```java
package com.sample.springtraining.dto.request;

import jakarta.validation.constraints.NotBlank;
import jakarta.validation.constraints.NotNull;
import jakarta.validation.constraints.Size;

/**
 * ê²Œì‹œê¸€ ìƒì„± ìš”ì²­ DTO
 */
public record PostCreateRequest(

        @NotBlank(message = "ì œëª©ì€ í•„ìˆ˜ì…ë‹ˆë‹¤")
        @Size(min = 2, max = 200, message = "ì œëª©ì€ 2-200ì ì‚¬ì´ì—¬ì•¼ í•©ë‹ˆë‹¤")
        String title,

        @NotBlank(message = "ë‚´ìš©ì€ í•„ìˆ˜ì…ë‹ˆë‹¤")
        @Size(min = 10, message = "ë‚´ìš©ì€ ìµœì†Œ 10ì ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤")
        String content,

        @NotNull(message = "ì‘ì„±ì IDëŠ” í•„ìˆ˜ì…ë‹ˆë‹¤")
        Long authorId
) {
}
```

```java
package com.sample.springtraining.dto.response;

import com.sample.springtraining.entity.Post;
import java.time.LocalDateTime;

/**
 * ê²Œì‹œê¸€ ì‘ë‹µ DTO
 */
public record PostResponse(
        Long id,
        String title,
        String content,
        String authorName,
        LocalDateTime createdAt,
        LocalDateTime updatedAt
) {
    /**
     * Entityë¥¼ DTOë¡œ ë³€í™˜
     */
    public static PostResponse from(Post post) {
        return new PostResponse(
                post.getId(),
                post.getTitle(),
                post.getContent(),
                post.getAuthor().getUsername(),
                post.getCreatedAt(),
                post.getUpdatedAt()
        );
    }
}
```

#### DTO ì‘ì„± ì›ì¹™
- **Java 21 Record ì‚¬ìš©**: ë¶ˆë³€ ê°ì²´ë¡œ ê°„ê²°í•˜ê²Œ ì‘ì„±
- **ìš”ì²­/ì‘ë‹µ ë¶„ë¦¬**: Request DTOì™€ Response DTO ëª…í™•íˆ êµ¬ë¶„
- **ê²€ì¦ ì–´ë…¸í…Œì´ì…˜**: Jakarta Validationìœ¼ë¡œ ì…ë ¥ê°’ ê²€ì¦
- **Entity ì§ì ‘ ë…¸ì¶œ ê¸ˆì§€**: API ì‘ë‹µìœ¼ë¡œ Entityë¥¼ ì ˆëŒ€ ì§ì ‘ ë°˜í™˜í•˜ì§€ ì•ŠìŒ
- **ë³€í™˜ ë©”ì„œë“œ**: `from()`, `toEntity()` ë“± ëª…í™•í•œ ë³€í™˜ ë©”ì„œë“œ ì œê³µ

### Entity ì‘ì„±

#### JPA Entity ì„¤ê³„
```java
package com.sample.springtraining.entity;

import jakarta.persistence.*;
import lombok.*;

/**
 * ê²Œì‹œê¸€ ì—”í‹°í‹°
 */
@Entity
@Table(name = "posts", indexes = {
        @Index(name = "idx_created_at", columnList = "created_at")
})
@Getter
@NoArgsConstructor(access = AccessLevel.PROTECTED) // JPA ê¸°ë³¸ ìƒì„±ì
@ToString(exclude = {"author"}) // ì—°ê´€ê´€ê³„ëŠ” toString ì œì™¸
public class Post extends BaseEntity {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;

    @Column(nullable = false, length = 200)
    private String title;

    @Column(nullable = false, columnDefinition = "TEXT")
    private String content;

    @ManyToOne(fetch = FetchType.LAZY) // ì§€ì—° ë¡œë”© í•„ìˆ˜
    @JoinColumn(name = "author_id", nullable = false)
    private Member author;

    @Column(nullable = false)
    private int viewCount = 0;

    @Builder
    public Post(String title, String content, Member author) {
        this.title = title;
        this.content = content;
        this.author = author;
    }

    // ë¹„ì¦ˆë‹ˆìŠ¤ ë©”ì„œë“œ
    public void updateTitle(String title) {
        this.title = title;
    }

    public void updateContent(String content) {
        this.content = content;
    }

    public void increaseViewCount() {
        this.viewCount++;
    }
}
```

```java
package com.sample.springtraining.entity;

import jakarta.persistence.*;
import lombok.Getter;
import org.springframework.data.annotation.CreatedDate;
import org.springframework.data.annotation.LastModifiedDate;
import org.springframework.data.jpa.domain.support.AuditingEntityListener;

import java.time.LocalDateTime;

/**
 * ê³µí†µ ì—”í‹°í‹° ì†ì„± (ìƒì„±ì¼, ìˆ˜ì •ì¼)
 */
@Getter
@MappedSuperclass
@EntityListeners(AuditingEntityListener.class)
public abstract class BaseEntity {

    @CreatedDate
    @Column(name = "created_at", nullable = false, updatable = false)
    private LocalDateTime createdAt;

    @LastModifiedDate
    @Column(name = "updated_at", nullable = false)
    private LocalDateTime updatedAt;
}
```

#### Entity ì‘ì„± ì›ì¹™
- **Lombok í™œìš©**: @Getter, @Builder ë“±ìœ¼ë¡œ ë³´ì¼ëŸ¬í”Œë ˆì´íŠ¸ ì œê±°
- **ì§€ì—° ë¡œë”©**: ì—°ê´€ê´€ê³„ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ `FetchType.LAZY`
- **ë¶ˆë³€ì„± ì¶”êµ¬**: Setter ì‚¬ìš© ê¸ˆì§€, ë¹„ì¦ˆë‹ˆìŠ¤ ë©”ì„œë“œë¡œ ìƒíƒœ ë³€ê²½
- **BaseEntity**: ê³µí†µ ì†ì„±(ìƒì„±ì¼, ìˆ˜ì •ì¼)ì€ ìƒì†ìœ¼ë¡œ ê´€ë¦¬
- **ì œì•½ì¡°ê±´**: nullable, unique, length ë“± DB ì œì•½ì¡°ê±´ ëª…ì‹œ

### Repository ì‘ì„±

#### Spring Data JPA + QueryDSL
```java
package com.sample.springtraining.repository;

import com.sample.springtraining.entity.Post;
import org.springframework.data.domain.Page;
import org.springframework.data.domain.Pageable;
import org.springframework.data.jpa.repository.JpaRepository;
import org.springframework.data.jpa.repository.Query;
import org.springframework.data.repository.query.Param;

import java.time.LocalDateTime;
import java.util.List;

/**
 * ê²Œì‹œê¸€ Repository
 */
public interface PostRepository extends JpaRepository<Post, Long> {

    // ë©”ì„œë“œ ì´ë¦„ìœ¼ë¡œ ì¿¼ë¦¬ ìë™ ìƒì„±
    Page<Post> findByTitleContaining(String title, Pageable pageable);

    // JPQL ì‚¬ìš©
    @Query("SELECT p FROM Post p WHERE p.author.id = :authorId ORDER BY p.createdAt DESC")
    List<Post> findByAuthorIdOrderByCreatedAtDesc(@Param("authorId") Long authorId);

    // ë„¤ì´í‹°ë¸Œ ì¿¼ë¦¬ (ë³µì¡í•œ ê²½ìš°ì—ë§Œ)
    @Query(value = "SELECT * FROM posts WHERE created_at >= :since", nativeQuery = true)
    List<Post> findRecentPosts(@Param("since") LocalDateTime since);

    // ì¹´ìš´íŠ¸ ì¿¼ë¦¬
    long countByAuthorId(Long authorId);

    // ì¡´ì¬ ì—¬ë¶€ í™•ì¸
    boolean existsByTitleAndAuthorId(String title, Long authorId);
}
```

#### Repository ì‘ì„± ì›ì¹™
- **Spring Data JPA í™œìš©**: ê¸°ë³¸ CRUDëŠ” JpaRepositoryê°€ ì œê³µ
- **ë©”ì„œë“œ ì´ë¦„ ì¿¼ë¦¬**: ê°„ë‹¨í•œ ì¿¼ë¦¬ëŠ” ë©”ì„œë“œ ì´ë¦„ìœ¼ë¡œ í•´ê²°
- **JPQL ì‚¬ìš©**: ë³µì¡í•œ ì¿¼ë¦¬ëŠ” @Queryë¡œ ëª…ì‹œ
- **QueryDSL ê³ ë ¤**: ë™ì  ì¿¼ë¦¬ê°€ ë§ìœ¼ë©´ QueryDSL ì‚¬ìš©
- **N+1 ë¬¸ì œ ì£¼ì˜**: fetch joinìœ¼ë¡œ í•´ê²°

### ì˜ˆì™¸ ì²˜ë¦¬

#### ì „ì—­ ì˜ˆì™¸ í•¸ë“¤ëŸ¬
```java
package com.sample.springtraining.exception;

import lombok.extern.slf4j.Slf4j;
import org.springframework.http.HttpStatus;
import org.springframework.http.ResponseEntity;
import org.springframework.validation.FieldError;
import org.springframework.web.bind.MethodArgumentNotValidException;
import org.springframework.web.bind.annotation.ExceptionHandler;
import org.springframework.web.bind.annotation.RestControllerAdvice;

import java.time.LocalDateTime;
import java.util.HashMap;
import java.util.Map;

/**
 * ì „ì—­ ì˜ˆì™¸ ì²˜ë¦¬
 */
@Slf4j
@RestControllerAdvice
public class GlobalExceptionHandler {

    /**
     * ë¦¬ì†ŒìŠ¤ ì—†ìŒ (404)
     */
    @ExceptionHandler(ResourceNotFoundException.class)
    public ResponseEntity<ErrorResponse> handleResourceNotFound(ResourceNotFoundException ex) {
        log.warn("ë¦¬ì†ŒìŠ¤ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ: {}", ex.getMessage());

        ErrorResponse error = new ErrorResponse(
                HttpStatus.NOT_FOUND.value(),
                ex.getMessage(),
                LocalDateTime.now()
        );

        return ResponseEntity.status(HttpStatus.NOT_FOUND).body(error);
    }

    /**
     * ì…ë ¥ê°’ ê²€ì¦ ì‹¤íŒ¨ (400)
     */
    @ExceptionHandler(MethodArgumentNotValidException.class)
    public ResponseEntity<ErrorResponse> handleValidationException(
            MethodArgumentNotValidException ex
    ) {
        Map<String, String> errors = new HashMap<>();
        ex.getBindingResult().getAllErrors().forEach(error -> {
            String fieldName = ((FieldError) error).getField();
            String message = error.getDefaultMessage();
            errors.put(fieldName, message);
        });

        log.warn("ì…ë ¥ê°’ ê²€ì¦ ì‹¤íŒ¨: {}", errors);

        ErrorResponse error = new ErrorResponse(
                HttpStatus.BAD_REQUEST.value(),
                "ì…ë ¥ê°’ì´ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤",
                LocalDateTime.now(),
                errors
        );

        return ResponseEntity.badRequest().body(error);
    }

    /**
     * ê¸°íƒ€ ì„œë²„ ì—ëŸ¬ (500)
     */
    @ExceptionHandler(Exception.class)
    public ResponseEntity<ErrorResponse> handleGeneralException(Exception ex) {
        log.error("ì„œë²„ ì—ëŸ¬ ë°œìƒ", ex);

        ErrorResponse error = new ErrorResponse(
                HttpStatus.INTERNAL_SERVER_ERROR.value(),
                "ì„œë²„ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.",
                LocalDateTime.now()
        );

        return ResponseEntity.status(HttpStatus.INTERNAL_SERVER_ERROR).body(error);
    }
}

/**
 * ì—ëŸ¬ ì‘ë‹µ DTO
 */
record ErrorResponse(
        int status,
        String message,
        LocalDateTime timestamp,
        Map<String, String> errors
) {
    public ErrorResponse(int status, String message, LocalDateTime timestamp) {
        this(status, message, timestamp, null);
    }
}
```

#### ì»¤ìŠ¤í…€ ì˜ˆì™¸
```java
package com.sample.springtraining.exception;

/**
 * ë¦¬ì†ŒìŠ¤ë¥¼ ì°¾ì„ ìˆ˜ ì—†ì„ ë•Œ ë°œìƒí•˜ëŠ” ì˜ˆì™¸
 */
public class ResourceNotFoundException extends RuntimeException {
    public ResourceNotFoundException(String message) {
        super(message);
    }
}
```

### ë³´ì•ˆ (Spring Security)

#### ê¸°ë³¸ ë³´ì•ˆ ì„¤ì •
```java
package com.sample.springtraining.config;

import lombok.RequiredArgsConstructor;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.security.config.annotation.web.builders.HttpSecurity;
import org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;
import org.springframework.security.config.http.SessionCreationPolicy;
import org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;
import org.springframework.security.crypto.password.PasswordEncoder;
import org.springframework.security.web.SecurityFilterChain;

/**
 * Spring Security ì„¤ì •
 */
@Configuration
@EnableWebSecurity
@RequiredArgsConstructor
public class SecurityConfig {

    @Bean
    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {
        http
            // CSRF ì„¤ì •
            .csrf(csrf -> csrf
                .ignoringRequestMatchers("/api/**") // APIëŠ” CSRF ì œì™¸
            )

            // ìš”ì²­ ê¶Œí•œ ì„¤ì •
            .authorizeHttpRequests(auth -> auth
                .requestMatchers("/api/v1/auth/**").permitAll() // ì¸ì¦ APIëŠ” ëª¨ë‘ í—ˆìš©
                .requestMatchers("/api/v1/posts/**").permitAll() // ê²Œì‹œê¸€ì€ ëª¨ë‘ í—ˆìš©
                .requestMatchers("/api/v1/admin/**").hasRole("ADMIN") // ê´€ë¦¬ìë§Œ
                .anyRequest().authenticated() // ë‚˜ë¨¸ì§€ëŠ” ì¸ì¦ í•„ìš”
            )

            // ì„¸ì…˜ ì •ì±… (JWT ì‚¬ìš© ì‹œ STATELESS)
            .sessionManagement(session -> session
                .sessionCreationPolicy(SessionCreationPolicy.STATELESS)
            );

        return http.build();
    }

    @Bean
    public PasswordEncoder passwordEncoder() {
        return new BCryptPasswordEncoder();
    }
}
```

### í…ŒìŠ¤íŠ¸ ì‘ì„±

#### Service í…ŒìŠ¤íŠ¸
```java
package com.sample.springtraining.service;

import com.sample.springtraining.dto.request.PostCreateRequest;
import com.sample.springtraining.dto.response.PostResponse;
import com.sample.springtraining.entity.Member;
import com.sample.springtraining.entity.Post;
import com.sample.springtraining.exception.ResourceNotFoundException;
import com.sample.springtraining.repository.MemberRepository;
import com.sample.springtraining.repository.PostRepository;
import org.junit.jupiter.api.DisplayName;
import org.junit.jupiter.api.Test;
import org.junit.jupiter.api.extension.ExtendWith;
import org.mockito.InjectMocks;
import org.mockito.Mock;
import org.mockito.junit.jupiter.MockitoExtension;

import java.util.Optional;

import static org.assertj.core.api.Assertions.*;
import static org.mockito.ArgumentMatchers.any;
import static org.mockito.BDDMockito.*;

/**
 * PostService í…ŒìŠ¤íŠ¸
 */
@ExtendWith(MockitoExtension.class)
@DisplayName("ê²Œì‹œê¸€ ì„œë¹„ìŠ¤ í…ŒìŠ¤íŠ¸")
class PostServiceTest {

    @Mock
    private PostRepository postRepository;

    @Mock
    private MemberRepository memberRepository;

    @InjectMocks
    private PostService postService;

    @Test
    @DisplayName("ê²Œì‹œê¸€ì„ ì„±ê³µì ìœ¼ë¡œ ìƒì„±í•œë‹¤")
    void createPost_Success() {
        // given (ì¤€ë¹„)
        PostCreateRequest request = new PostCreateRequest(
                "í…ŒìŠ¤íŠ¸ ì œëª©",
                "í…ŒìŠ¤íŠ¸ ë‚´ìš©ì…ë‹ˆë‹¤.",
                1L
        );

        Member author = Member.builder()
                .id(1L)
                .username("testuser")
                .build();

        Post savedPost = Post.builder()
                .title(request.title())
                .content(request.content())
                .author(author)
                .build();

        given(memberRepository.findById(1L)).willReturn(Optional.of(author));
        given(postRepository.save(any(Post.class))).willReturn(savedPost);

        // when (ì‹¤í–‰)
        PostResponse result = postService.createPost(request);

        // then (ê²€ì¦)
        assertThat(result).isNotNull();
        assertThat(result.title()).isEqualTo("í…ŒìŠ¤íŠ¸ ì œëª©");
        assertThat(result.content()).isEqualTo("í…ŒìŠ¤íŠ¸ ë‚´ìš©ì…ë‹ˆë‹¤.");

        verify(memberRepository, times(1)).findById(1L);
        verify(postRepository, times(1)).save(any(Post.class));
    }

    @Test
    @DisplayName("ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ì‚¬ìš©ìë¡œ ê²Œì‹œê¸€ ìƒì„± ì‹œ ì˜ˆì™¸ ë°œìƒ")
    void createPost_UserNotFound_ThrowsException() {
        // given
        PostCreateRequest request = new PostCreateRequest(
                "í…ŒìŠ¤íŠ¸ ì œëª©",
                "í…ŒìŠ¤íŠ¸ ë‚´ìš©",
                999L
        );

        given(memberRepository.findById(999L)).willReturn(Optional.empty());

        // when & then
        assertThatThrownBy(() -> postService.createPost(request))
                .isInstanceOf(ResourceNotFoundException.class)
                .hasMessageContaining("ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤");
    }
}
```

#### Controller í†µí•© í…ŒìŠ¤íŠ¸
```java
package com.sample.springtraining.controller;

import com.fasterxml.jackson.databind.ObjectMapper;
import com.sample.springtraining.dto.request.PostCreateRequest;
import org.junit.jupiter.api.DisplayName;
import org.junit.jupiter.api.Test;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.autoconfigure.web.servlet.AutoConfigureMockMvc;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.http.MediaType;
import org.springframework.test.context.ActiveProfiles;
import org.springframework.test.web.servlet.MockMvc;
import org.springframework.transaction.annotation.Transactional;

import static org.springframework.test.web.servlet.request.MockMvcRequestBuilders.*;
import static org.springframework.test.web.servlet.result.MockMvcResultHandlers.print;
import static org.springframework.test.web.servlet.result.MockMvcResultMatchers.*;

/**
 * PostController í†µí•© í…ŒìŠ¤íŠ¸
 */
@SpringBootTest
@AutoConfigureMockMvc
@Transactional // ê° í…ŒìŠ¤íŠ¸ í›„ ë¡¤ë°±
@ActiveProfiles("test")
@DisplayName("ê²Œì‹œê¸€ API í†µí•© í…ŒìŠ¤íŠ¸")
class PostControllerIntegrationTest {

    @Autowired
    private MockMvc mockMvc;

    @Autowired
    private ObjectMapper objectMapper;

    @Test
    @DisplayName("ê²Œì‹œê¸€ ëª©ë¡ ì¡°íšŒ API")
    void getPosts() throws Exception {
        mockMvc.perform(get("/api/v1/posts")
                        .param("page", "0")
                        .param("size", "10"))
                .andExpect(status().isOk())
                .andExpect(jsonPath("$.content").isArray())
                .andDo(print());
    }

    @Test
    @DisplayName("ê²Œì‹œê¸€ ìƒì„± API")
    void createPost() throws Exception {
        PostCreateRequest request = new PostCreateRequest(
                "ìƒˆ ê²Œì‹œê¸€",
                "ê²Œì‹œê¸€ ë‚´ìš©ì…ë‹ˆë‹¤.",
                1L
        );

        mockMvc.perform(post("/api/v1/posts")
                        .contentType(MediaType.APPLICATION_JSON)
                        .content(objectMapper.writeValueAsString(request)))
                .andExpect(status().isCreated())
                .andExpect(jsonPath("$.title").value("ìƒˆ ê²Œì‹œê¸€"))
                .andDo(print());
    }

    @Test
    @DisplayName("ì˜ëª»ëœ ìš”ì²­ìœ¼ë¡œ ê²Œì‹œê¸€ ìƒì„± ì‹œ 400 ì—ëŸ¬")
    void createPost_InvalidRequest_BadRequest() throws Exception {
        PostCreateRequest request = new PostCreateRequest(
                "", // ë¹ˆ ì œëª©
                "ë‚´ìš©",
                1L
        );

        mockMvc.perform(post("/api/v1/posts")
                        .contentType(MediaType.APPLICATION_JSON)
                        .content(objectMapper.writeValueAsString(request)))
                .andExpect(status().isBadRequest())
                .andDo(print());
    }
}
```

---

## ğŸ”„ í”„ë¡ íŠ¸ì—”ë“œ â†” ë°±ì—”ë“œ ì—°ë™

### API í˜¸ì¶œ íŒ¨í„´

#### í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ë°±ì—”ë“œ API í˜¸ì¶œ
```typescript
// lib/api/posts.ts
const API_BASE_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:8080'

export interface Post {
  id: number
  title: string
  content: string
  authorName: string
  createdAt: string
  updatedAt: string
}

export interface CreatePostRequest {
  title: string
  content: string
  authorId: number
}

/**
 * ê²Œì‹œê¸€ ëª©ë¡ ì¡°íšŒ
 */
export async function getPosts(page = 0, size = 20): Promise<Post[]> {
  const res = await fetch(
    `${API_BASE_URL}/api/v1/posts?page=${page}&size=${size}`,
    {
      next: { revalidate: 60 } // 60ì´ˆ ìºì‹œ
    }
  )

  if (!res.ok) {
    throw new Error('ê²Œì‹œê¸€ ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤')
  }

  const data = await res.json()
  return data.content // Spring Data Pageì˜ content
}

/**
 * ê²Œì‹œê¸€ ìƒì„¸ ì¡°íšŒ
 */
export async function getPost(id: number): Promise<Post> {
  const res = await fetch(`${API_BASE_URL}/api/v1/posts/${id}`, {
    next: { revalidate: 60 }
  })

  if (!res.ok) {
    if (res.status === 404) {
      throw new Error('ê²Œì‹œê¸€ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤')
    }
    throw new Error('ê²Œì‹œê¸€ì„ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤')
  }

  return res.json()
}

/**
 * ê²Œì‹œê¸€ ìƒì„± (Server Action)
 */
'use server'
export async function createPost(data: CreatePostRequest): Promise<Post> {
  const res = await fetch(`${API_BASE_URL}/api/v1/posts`, {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
    },
    body: JSON.stringify(data),
  })

  if (!res.ok) {
    const error = await res.json()
    throw new Error(error.message || 'ê²Œì‹œê¸€ ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤')
  }

  return res.json()
}
```

### CORS ì„¤ì • (ë°±ì—”ë“œ)

```java
package com.sample.springtraining.config;

import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.web.cors.CorsConfiguration;
import org.springframework.web.cors.UrlBasedCorsConfigurationSource;
import org.springframework.web.filter.CorsFilter;

import java.util.Arrays;

@Configuration
public class WebConfig {

    @Bean
    public CorsFilter corsFilter() {
        CorsConfiguration config = new CorsConfiguration();
        config.setAllowCredentials(true);
        config.setAllowedOrigins(Arrays.asList(
                "http://localhost:3000",  // ë¡œì»¬ ê°œë°œ
                "https://your-domain.com" // í”„ë¡œë•ì…˜
        ));
        config.setAllowedHeaders(Arrays.asList("*"));
        config.setAllowedMethods(Arrays.asList("GET", "POST", "PUT", "PATCH", "DELETE", "OPTIONS"));

        UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();
        source.registerCorsConfiguration("/api/**", config);

        return new CorsFilter(source);
    }
}
```

---

## ğŸ“ Git & í˜‘ì—…

### Commit ë©”ì‹œì§€ ê·œì¹™

```
feat: ìƒˆë¡œìš´ ê¸°ëŠ¥ ì¶”ê°€
fix: ë²„ê·¸ ìˆ˜ì •
docs: ë¬¸ì„œ ìˆ˜ì •
style: ì½”ë“œ í¬ë§·íŒ…, ì„¸ë¯¸ì½œë¡  ëˆ„ë½ ë“± (ë¡œì§ ë³€ê²½ ì—†ìŒ)
refactor: ì½”ë“œ ë¦¬íŒ©í† ë§
test: í…ŒìŠ¤íŠ¸ ì½”ë“œ ì¶”ê°€/ìˆ˜ì •
chore: ë¹Œë“œ ì„¤ì •, íŒ¨í‚¤ì§€ ë§¤ë‹ˆì € ë“±

ì˜ˆì‹œ:
feat: ê²Œì‹œê¸€ ê²€ìƒ‰ ê¸°ëŠ¥ ì¶”ê°€
fix: ë¡œê·¸ì¸ ì‹œ í† í° ê°±ì‹  ë²„ê·¸ ìˆ˜ì •
docs: API ë¬¸ì„œ ì—…ë°ì´íŠ¸
refactor: PostService ì½”ë“œ ì •ë¦¬
```

### ë¸Œëœì¹˜ ì „ëµ

```
main - í”„ë¡œë•ì…˜ ë°°í¬ ë¸Œëœì¹˜
develop - ê°œë°œ í†µí•© ë¸Œëœì¹˜
feature/ê¸°ëŠ¥ëª… - ìƒˆ ê¸°ëŠ¥ ê°œë°œ
fix/ë²„ê·¸ëª… - ë²„ê·¸ ìˆ˜ì •
```

---

## ğŸ“ í•™ìŠµ ì²´í¬ë¦¬ìŠ¤íŠ¸

### í”„ë¡ íŠ¸ì—”ë“œ í•µì‹¬ ê°œë…
- [ ] TypeScript íƒ€ì… ì‹œìŠ¤í…œ ì´í•´
- [ ] React í•¨ìˆ˜í˜• ì»´í¬ë„ŒíŠ¸ì™€ Hooks
- [ ] Next.js App Routerì™€ Server/Client Components
- [ ] Server Actionsë¡œ í¼ ì²˜ë¦¬
- [ ] ì—ëŸ¬ ì²˜ë¦¬ì™€ ë¡œë”© ìƒíƒœ ê´€ë¦¬
- [ ] Tailwind CSSë¡œ ë°˜ì‘í˜• ë””ìì¸

### ë°±ì—”ë“œ í•µì‹¬ ê°œë…
- [ ] ê³„ì¸µí˜• ì•„í‚¤í…ì²˜ (Controller-Service-Repository)
- [ ] REST API ì„¤ê³„ ì›ì¹™
- [ ] Spring Data JPAì™€ ì—”í‹°í‹° ì„¤ê³„
- [ ] íŠ¸ëœì­ì…˜ ê´€ë¦¬
- [ ] ì˜ˆì™¸ ì²˜ë¦¬ì™€ ë¡œê¹…
- [ ] Spring Security ê¸°ë³¸

### ì‹¤ë¬´ ìŠ¤í‚¬
- [ ] Gitìœ¼ë¡œ ë²„ì „ ê´€ë¦¬
- [ ] ì˜ë¯¸ ìˆëŠ” ë³€ìˆ˜/í•¨ìˆ˜ ì´ë¦„ ì§“ê¸°
- [ ] ì½”ë“œ ë¦¬ë·° ì£¼ê³ ë°›ê¸°
- [ ] í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±
- [ ] API ë¬¸ì„œí™”
- [ ] ë¡œê·¸ ë‚¨ê¸°ê¸°ì™€ ë””ë²„ê¹…

---

## ğŸ’¡ ì‹¤ë¬´ Tips

### ê°œë°œ ì „ ì²´í¬ë¦¬ìŠ¤íŠ¸
- [ ] ìš”êµ¬ì‚¬í•­ì„ ëª…í™•íˆ ì´í•´í–ˆëŠ”ê°€?
- [ ] ê¸°ì¡´ ì½”ë“œì—ì„œ ë¹„ìŠ·í•œ íŒ¨í„´ì„ ì°¾ì•˜ëŠ”ê°€?
- [ ] ì–´ë–¤ êµ¬ì¡°ë¡œ êµ¬í˜„í• ì§€ ì„¤ê³„í–ˆëŠ”ê°€?

### ê°œë°œ ì¤‘ ì²´í¬ë¦¬ìŠ¤íŠ¸
- [ ] ì½”ë“œê°€ ì½ê¸° ì‰¬ìš´ê°€?
- [ ] í•¨ìˆ˜ê°€ í•˜ë‚˜ì˜ ì¼ë§Œ í•˜ëŠ”ê°€?
- [ ] ë³€ìˆ˜/í•¨ìˆ˜ ì´ë¦„ì´ ì˜ë„ë¥¼ ëª…í™•íˆ í‘œí˜„í•˜ëŠ”ê°€?
- [ ] ì—ëŸ¬ ìƒí™©ì„ ê³ ë ¤í–ˆëŠ”ê°€?

### ê°œë°œ í›„ ì²´í¬ë¦¬ìŠ¤íŠ¸
- [ ] í…ŒìŠ¤íŠ¸ë¥¼ ì‘ì„±í–ˆëŠ”ê°€?
- [ ] ë¡œê·¸ë¥¼ ì ì ˆíˆ ë‚¨ê²¼ëŠ”ê°€?
- [ ] ì½”ë“œ ë¦¬ë·°ë¥¼ ìš”ì²­í•  ì¤€ë¹„ê°€ ë˜ì—ˆëŠ”ê°€?
- [ ] ë¬¸ì„œê°€ í•„ìš”í•œ ë¶€ë¶„ì€ ì‘ì„±í–ˆëŠ”ê°€?

### í•™ìŠµ ë°©ë²•
1. **ê³µì‹ ë¬¸ì„œë¥¼ ë¨¼ì € ì½ê¸°**: AIê°€ ì•Œë ¤ì¤€ ë‚´ìš©ë„ ê³µì‹ ë¬¸ì„œë¡œ í™•ì¸
2. **ì‘ì€ ë‹¨ìœ„ë¡œ í•™ìŠµ**: í•œ ë²ˆì— í•˜ë‚˜ì˜ ê°œë…ë§Œ ì§‘ì¤‘
3. **ì§ì ‘ íƒ€ì´í•‘**: ë³µë¶™í•˜ì§€ ë§ê³  ì§ì ‘ ì½”ë“œ ì‘ì„±
4. **ì—ëŸ¬ í•´ê²° ê²½í—˜**: ì—ëŸ¬ê°€ ë‚˜ë©´ ì¢‹ì€ í•™ìŠµ ê¸°íšŒ
5. **ì½”ë“œ ë¦¬ë·° í™œìš©**: ë‹¤ë¥¸ ì‚¬ëŒì˜ í”¼ë“œë°±ìœ¼ë¡œ ì„±ì¥

---

## ğŸ” ì°¸ê³  ìë£Œ

### ê³µì‹ ë¬¸ì„œ
- React: https://react.dev
- Next.js: https://nextjs.org/docs
- TypeScript: https://www.typescriptlang.org/docs
- Spring Boot: https://spring.io/projects/spring-boot
- Spring Data JPA: https://spring.io/projects/spring-data-jpa

### ì¶”ì²œ ë„ì„œ
- í´ë¦° ì½”ë“œ (Clean Code) - Robert C. Martin
- ë¦¬íŒ©í† ë§ (Refactoring) - Martin Fowler
- ì´í™í‹°ë¸Œ ìë°” (Effective Java) - Joshua Bloch

### ì‹¤ë¬´ ì›ì¹™
- SOLID ì›ì¹™
- DRY (Don't Repeat Yourself)
- KISS (Keep It Simple, Stupid)
- YAGNI (You Aren't Gonna Need It)

---

ì´ ê°€ì´ë“œëŠ” í•™ìŠµí•˜ë©´ì„œ ê³„ì† ì—…ë°ì´íŠ¸í•˜ì„¸ìš”.
ì‹¤ë¬´ì—ì„œëŠ” ì™„ë²½í•œ ì½”ë“œë³´ë‹¤ **ë™ì‘í•˜ê³ , ì½ê¸° ì‰½ê³ , ìœ ì§€ë³´ìˆ˜ ê°€ëŠ¥í•œ ì½”ë“œ**ê°€ ì¤‘ìš”í•©ë‹ˆë‹¤.
